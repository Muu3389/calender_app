<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>

    <div id="event-form" class="event-form">
        <h3>予定を追加</h3>
        <label>日付: <input type="text" id="event-date" readonly></label>
        <label>時間: <input type="time" id="event-time"></label>
        <label>内容: <input type="text" id="event-text"></label>
        <button id="save-event">保存</button>
        <button id="cancel-event">キャンセル</button>
    </div>

    <h1>
        <form method="get" class="jump-form">
            <select name="year" id="year-select" onchange="this.form.submit()">
                {% for y in range(year-5, year+6) %}
                    <option value="{{ y }}" {% if y == year %}selected{% endif %}>{{ y }}年</option>
                {% endfor %}
            </select>
            <select name="month" id="month-select" onchange="this.form.submit()">
                {% for m in range(1, 13) %}
                    <option value="{{ m }}" {% if m == month %}selected{% endif %}>{{ m }}月</option>
                {% endfor %}
            </select>
        </form>
    </h1>

    <div class="nav">
        <a href="/?year={{ year if month > 1 else year-1 }}&month={{ month-1 if month > 1 else 12 }}">
            <button>前の月</button>
        </a>

        <a href="/?year={{ year if month < 12 else year+1 }}&month={{ month+1 if month < 12 else 1 }}">
            <button>次の月</button>
        </a>
    </div>

    <table>
        <tr>
            <th>日</th><th>月</th><th>火</th><th>水</th><th>木</th><th>金</th><th>土</th>
        </tr>
        {% for week in month_days %}
        <tr>
            {% for day in week %}
                {% if day == 0 %}
                    <td class="empty"></td>
                {% else %}
                    <td data-date="{{ year }}-{{ '%02d' % month }}-{{ '%02d' % day }}" class="day-cell">
                        <div class="day-number">{{day}}</div>
                        {% if day in events%}
                            {% for title in events[day] %}
                                <div class="event">{{ title[0] }}: {{ title[1] }}</div>
                            {% endfor %}
                        {% endif %}
                    </td>
                {% endif %}
            {% endfor %}
        </tr>
        {% endfor %}
    </table>

    <script src="{{ url_for('static', filename='script.js') }}"></script>

</body>

</html>
